@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --font-serif: var(--font-libre);
    --font-mono: var(--font-geist-mono);

    /* ğŸŒŒ Time Atlas Palette (æ—¶ç©ºå›¾è°±è‰²ç›˜) */
    --color-atlas-paper: var(--atlas-paper);     /* é™¶ç“·ç™½åº•è‰² (98%ä¸é€æ˜) */
    --color-deep-ocean: var(--deep-ocean);       /* æ·±æµ·è“ (ä¸»æ–‡å­—) */
    --color-faded-slate: var(--faded-slate);     /* è“ç° (æ¬¡è¦ä¿¡æ¯/çº¿æ¡) */
    --color-time-gold: var(--time-gold);         /* ç«ç‘°é‡‘/é“œè‰² (é«˜äº®/å¼ºè°ƒ) */
    --color-grid-line: var(--grid-line);         /* å¾®å¼±ç½‘æ ¼çº¿ */
    /* æ˜ å°„ Shadcn */
    --color-card: var(--atlas-paper);
    --color-card-foreground: var(--deep-ocean);
    --color-popover: var(--atlas-paper);
    --color-popover-foreground: var(--deep-ocean);
    --color-primary: var(--deep-ocean);
    --color-primary-foreground: var(--atlas-paper);
    --color-secondary: var(--faded-slate);
    --color-secondary-foreground: var(--atlas-paper);
    --color-muted: var(--grid-line);
    --color-muted-foreground: var(--faded-slate);
    --color-accent: var(--time-gold);
    --color-accent-foreground: var(--atlas-paper);
    --color-destructive: var(--time-gold); /* å¼ºè°ƒè‰²ä½œä¸º Destructive */
    --color-destructive-foreground: var(--atlas-paper);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--time-gold);

    --radius-sm: 0.3rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.8rem;
}

:root {
    /* æè´¨ï¼šé«˜è´¨æ„Ÿçš„å®è‰²ï¼Œæµ…è‰²ç³» */
    --atlas-paper: oklch(0.99 0.005 85); /* ææµ…çš„ç±³ç™½ï¼Œåƒé™¶ç“· */
    --deep-ocean: oklch(0.25 0.04 250); /* æ·±é‚ƒã€ç†æ€§çš„æµ·å†›è“ */
    --faded-slate: oklch(0.55 0.03 240); /* è“ç°ï¼Œç”¨äºæ³¨é‡Šå’Œç»†èŠ‚ */
    --time-gold: oklch(0.70 0.15 60); /* ç«ç‘°é‡‘/é“œè‰² */
    --grid-line: oklch(0.94 0.01 250); /* è£…é¥°ç½‘æ ¼çº¿ */

    --background: #f3f5f7; /* æ•´ä½“å¤§èƒŒæ™¯å¸¦ä¸€ç‚¹ç°ï¼Œè¡¬æ‰˜ç™½è‰²å¡ç‰‡ */
    --foreground: var(--deep-ocean);

    --border: oklch(0.92 0.01 250); /* æç»†è¾¹æ¡† */
    --input: var(--atlas-paper);

    --radius: 0.5rem;
}

@layer base {
    * {
        @apply border-border outline-ring/50;
    }

    body {
        @apply bg-background text-foreground;
        /* èƒŒæ™¯ï¼šå¾®å¼±çš„ç½‘æ ¼çº¹ç†ï¼Œåƒç»˜å›¾æ¡Œ */
        background-image: linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
        background-size: 40px 40px;
    }

    /* å¼ºåˆ¶æ‰€æœ‰æ ‡é¢˜ä½¿ç”¨è¡¬çº¿ä½“ */
    h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-serif), ui-serif, Georgia, serif;
        font-weight: 700;
        letter-spacing: -0.02em;
    }
}

@layer utilities {
    /* ç§»é™¤æ—§çš„ç¾Šçš®çº¸çº¹ç† */
    .bg-parchment {
        background-color: var(--background);
        background-image: none;
    }

    /* âœ¨ æ ¸å¿ƒå¡ç‰‡æ ·å¼ï¼šå®å¿ƒã€é«˜é›…æŠ•å½±ã€ç°ä»£è¾¹æ¡† (ä»£æ›¿æ—§çš„ bg-paper/bg-parchment) */
    .bg-ceramic {
        background-color: var(--atlas-paper); /* æ¥è¿‘çº¯ç™½ï¼Œé«˜ä¸é€æ˜åº¦ */
        backdrop-filter: blur(4px);
        border: 1px solid var(--border);
        box-shadow: 0 8px 30px -10px rgba(30, 40, 60, 0.2),
        0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .shadow-ceramic {
        box-shadow: 0 4px 15px rgba(30, 40, 60, 0.1);
    }

    /* æ–°å¢ï¼šå¤å¤ç»†æ»šåŠ¨æ¡ */
    .custom-scrollbar {
        scrollbar-width: thin; /* Firefox */
        scrollbar-color: var(--faded-slate) transparent;
    }

    /* Webkit (Chrome, Safari, Edge) å®šåˆ¶ */
    .custom-scrollbar::-webkit-scrollbar {
        width: 5px; /* æç»† */
        height: 5px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background-color: var(--faded-slate);
        border-radius: 5px;
        opacity: 0.6;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: var(--time-gold);
    }

    .text-balance {
        text-wrap: balance;
    }
}

/* ğŸ—ºï¸ åœ°å›¾æ»¤é•œï¼šè®©åœ°å›¾çœ‹èµ·æ¥åƒè¤ªè‰²çš„æ—§ç…§ç‰‡ä½†åˆå¾ˆæ¸…æ™° */
.vintage-map-tiles {
    filter: sepia(0.1) contrast(1.05) brightness(1.05) hue-rotate(-10deg);
    opacity: 0.95;
}

/* Leaflet Popup ç°ä»£/é™¶ç“·åŒ– */
.leaflet-popup-content-wrapper, .leaflet-popup-tip {
    background: var(--atlas-paper) !important;
    border: 1px solid var(--border);
    box-shadow: 0 4px 15px rgba(30, 40, 60, 0.15) !important;
    border-radius: var(--radius-sm) !important;
}

.leaflet-popup-content {
    font-family: var(--font-serif) !important;
    color: var(--deep-ocean) !important;
    margin: 10px !important;
}

.leaflet-container a.leaflet-popup-close-button {
    color: var(--faded-slate) !important;
}

/* æ‰«æåŠ¨ç”» (ç”¨äº Details Sheet) */
@keyframes scan {
    0% {
        transform: translateY(-100%);
        opacity: 0;
    }
    5% {
        opacity: 1;
    }
    95% {
        opacity: 1;
    }
    100% {
        transform: translateY(100%);
        opacity: 0;
    }
}

.animate-scan {
    animation: scan 4s linear infinite;
}